"""
æ™ºèƒ½ä½“åˆ›å»ºèƒ½åŠ›æ¼”ç¤º

å±•ç¤ºä¸»æ™ºèƒ½ä½“å¦‚ä½•è‡ªä¸»åˆ›å»ºå’Œç®¡ç†å­æ™ºèƒ½ä½“
è¿™æ˜¯"å…ƒå…ƒç¼–ç¨‹"èƒ½åŠ›çš„æ¼”ç¤º
"""
from agent import ToolCreatorAgent


def demo_agent_creation():
    """æ¼”ç¤ºæ™ºèƒ½ä½“åˆ›å»ºèƒ½åŠ›"""
    
    print("=" * 70)
    print("ğŸ¤– æ™ºèƒ½ä½“åˆ›å»ºèƒ½åŠ›æ¼”ç¤º - å…ƒå…ƒç¼–ç¨‹")
    print("=" * 70)
    print()
    print("æœ¬æ¼”ç¤ºå±•ç¤ºä¸»æ™ºèƒ½ä½“å¦‚ä½•ï¼š")
    print("1. è‡ªä¸»åˆ›å»ºä¸“é—¨åŒ–çš„å­æ™ºèƒ½ä½“")
    print("2. å°†ä»»åŠ¡å§”æ´¾ç»™å­æ™ºèƒ½ä½“æ‰§è¡Œ")
    print("3. ç®¡ç†æ™ºèƒ½ä½“å›¢é˜Ÿ")
    print()
    
    # åˆ›å»ºä¸»æ™ºèƒ½ä½“
    agent = ToolCreatorAgent(
        model="gpt-4",
        thread_id="agent-creation-demo",
        enable_agent_creation=True
    )
    
    # ========== åœºæ™¯1ï¼šåˆ›å»ºæ•°æ®åˆ†æå¸ˆ ==========
    print("\n" + "=" * 50)
    print("ğŸ“Š åœºæ™¯1ï¼šåˆ›å»ºæ•°æ®åˆ†æå¸ˆæ™ºèƒ½ä½“")
    print("=" * 50)
    
    response = agent.chat("""
åˆ›å»ºä¸€ä¸ªæ•°æ®åˆ†æå¸ˆæ™ºèƒ½ä½“ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- åç§°ï¼šdata_analyst
- è§’è‰²ï¼šé«˜çº§æ•°æ®åˆ†æå¸ˆ
- ä¸“é•¿ï¼šæ•°æ®æ¸…æ´—ã€ç»Ÿè®¡åˆ†æã€è¶‹åŠ¿è¯†åˆ«ã€æŠ¥å‘Šæ’°å†™
- é£æ ¼ï¼šä¸“ä¸šä½†æ˜“æ‡‚
""")
    print(f"\nå›å¤ï¼š{response}")
    
    # ========== åœºæ™¯2ï¼šåˆ›å»ºä»£ç å®¡æŸ¥å‘˜ ==========
    print("\n" + "=" * 50)
    print("ğŸ” åœºæ™¯2ï¼šåˆ›å»ºä»£ç å®¡æŸ¥å‘˜æ™ºèƒ½ä½“")
    print("=" * 50)
    
    response = agent.chat("""
åˆ›å»ºä¸€ä¸ªä»£ç å®¡æŸ¥å‘˜æ™ºèƒ½ä½“ï¼š
- åç§°ï¼šcode_reviewer
- è§’è‰²ï¼šèµ„æ·±ä»£ç å®¡æŸ¥å‘˜
- ä¸“é•¿ï¼šä»£ç è´¨é‡ã€æœ€ä½³å®è·µã€å®‰å…¨æ¼æ´ã€æ€§èƒ½ä¼˜åŒ–
- é£æ ¼ï¼šä¸¥è°¨ç»†è‡´ï¼Œç»™å‡ºå…·ä½“å»ºè®®
""")
    print(f"\nå›å¤ï¼š{response}")
    
    # ========== åœºæ™¯3ï¼šå§”æ´¾æ•°æ®åˆ†æä»»åŠ¡ ==========
    print("\n" + "=" * 50)
    print("ğŸ“ˆ åœºæ™¯3ï¼šå§”æ´¾æ•°æ®åˆ†æä»»åŠ¡")
    print("=" * 50)
    
    response = agent.chat("""
è®©æ•°æ®åˆ†æå¸ˆåˆ†æä»¥ä¸‹é”€å”®æ•°æ®ï¼š

æœˆä»½: [1æœˆ, 2æœˆ, 3æœˆ, 4æœˆ, 5æœˆ, 6æœˆ]
é”€å”®é¢: [100, 120, 115, 140, 160, 180]
æˆæœ¬: [60, 70, 68, 80, 90, 95]

è¯·åˆ†æï¼š
1. é”€å”®è¶‹åŠ¿
2. åˆ©æ¶¦å˜åŒ–
3. å¢é•¿ç‡
""")
    print(f"\nå›å¤ï¼š{response}")
    
    # ========== åœºæ™¯4ï¼šå§”æ´¾ä»£ç å®¡æŸ¥ä»»åŠ¡ ==========
    print("\n" + "=" * 50)
    print("ğŸ”§ åœºæ™¯4ï¼šå§”æ´¾ä»£ç å®¡æŸ¥ä»»åŠ¡")
    print("=" * 50)
    
    response = agent.chat("""
è®©ä»£ç å®¡æŸ¥å‘˜å®¡æŸ¥ä»¥ä¸‹Pythonä»£ç ï¼š

```python
def calculate_discount(price, discount):
    if discount > 100:
        discount = 100
    final_price = price - price * discount / 100
    return final_price

def process_orders(orders):
    total = 0
    for order in orders:
        total = total + calculate_discount(order['price'], order['discount'])
    return total
```

è¯·æ£€æŸ¥ä»£ç è´¨é‡å’Œæ½œåœ¨é—®é¢˜ã€‚
""")
    print(f"\nå›å¤ï¼š{response}")
    
    # ========== åœºæ™¯5ï¼šæŸ¥çœ‹æ™ºèƒ½ä½“å›¢é˜Ÿ ==========
    print("\n" + "=" * 50)
    print("ğŸ‘¥ åœºæ™¯5ï¼šæŸ¥çœ‹æ™ºèƒ½ä½“å›¢é˜Ÿ")
    print("=" * 50)
    
    response = agent.chat("åˆ—å‡ºæ‰€æœ‰å·²åˆ›å»ºçš„æ™ºèƒ½ä½“")
    print(f"\nå›å¤ï¼š{response}")
    
    # ç›´æ¥æŸ¥çœ‹
    print("\nç›´æ¥æŸ¥çœ‹ï¼š")
    print(f"å·¥å…·åˆ—è¡¨ï¼š{agent.list_tools()}")
    print(f"æ™ºèƒ½ä½“åˆ—è¡¨ï¼š{agent.list_agents()}")
    
    print("\n" + "=" * 70)
    print("âœ… æ¼”ç¤ºå®Œæˆï¼")
    print("=" * 70)
    print()
    print("æ€»ç»“ï¼š")
    print("- ä¸»æ™ºèƒ½ä½“æˆåŠŸåˆ›å»ºäº†ä¸“é—¨åŒ–çš„å­æ™ºèƒ½ä½“")
    print("- å­æ™ºèƒ½ä½“èƒ½å¤Ÿç‹¬ç«‹å®Œæˆå§”æ´¾çš„ä»»åŠ¡")
    print("- è¿™å±•ç¤ºäº†'æ™ºèƒ½ä½“åˆ›é€ æ™ºèƒ½ä½“'çš„å…ƒå…ƒç¼–ç¨‹èƒ½åŠ›")
    print()


def demo_tool_and_agent_collaboration():
    """æ¼”ç¤ºå·¥å…·å’Œæ™ºèƒ½ä½“çš„åä½œ"""
    
    print("\n" + "=" * 70)
    print("ğŸ”„ å·¥å…·ä¸æ™ºèƒ½ä½“åä½œæ¼”ç¤º")
    print("=" * 70)
    
    agent = ToolCreatorAgent(
        model="gpt-4",
        thread_id="collaboration-demo"
    )
    
    # å…ˆåˆ›å»ºä¸€ä¸ªè®¡ç®—å·¥å…·
    print("\næ­¥éª¤1ï¼šåˆ›å»ºè®¡ç®—å·¥å…·")
    response = agent.chat("åˆ›å»ºä¸€ä¸ªè®¡ç®—å¤åˆ©çš„å·¥å…·ï¼Œå‚æ•°ï¼šæœ¬é‡‘principalã€å¹´åˆ©ç‡rateã€å¹´æ•°years")
    print(f"å›å¤ï¼š{response}")
    
    # å†åˆ›å»ºä¸€ä¸ªè´¢åŠ¡é¡¾é—®æ™ºèƒ½ä½“
    print("\næ­¥éª¤2ï¼šåˆ›å»ºè´¢åŠ¡é¡¾é—®æ™ºèƒ½ä½“")
    response = agent.chat("""
åˆ›å»ºä¸€ä¸ªè´¢åŠ¡é¡¾é—®æ™ºèƒ½ä½“ï¼š
- åç§°ï¼šfinancial_advisor
- è§’è‰²ï¼šç†è´¢é¡¾é—®
- ä¸“é•¿ï¼šæŠ•èµ„å»ºè®®ã€é£é™©è¯„ä¼°ã€è´¢åŠ¡è§„åˆ’
""")
    print(f"å›å¤ï¼š{response}")
    
    # è®©è´¢åŠ¡é¡¾é—®ä½¿ç”¨å·¥å…·è¿›è¡Œåˆ†æ
    print("\næ­¥éª¤3ï¼šç»¼åˆåˆ†æ")
    response = agent.chat("""
æˆ‘æœ‰10ä¸‡å…ƒæƒ³è¦æŠ•èµ„ï¼Œè¯·ï¼š
1. ç”¨å¤åˆ©è®¡ç®—å·¥å…·è®¡ç®—ï¼šå¹´åˆ©ç‡5%ï¼ŒæŠ•èµ„10å¹´åçš„é‡‘é¢
2. è®©è´¢åŠ¡é¡¾é—®ç»™å‡ºæŠ•èµ„å»ºè®®
""")
    print(f"å›å¤ï¼š{response}")
    
    print("\nâœ… åä½œæ¼”ç¤ºå®Œæˆï¼")


if __name__ == "__main__":
    print("é€‰æ‹©æ¼”ç¤ºæ¨¡å¼ï¼š")
    print("1. æ™ºèƒ½ä½“åˆ›å»ºæ¼”ç¤º")
    print("2. å·¥å…·ä¸æ™ºèƒ½ä½“åä½œæ¼”ç¤º")
    print("3. å…¨éƒ¨æ¼”ç¤º")
    
    choice = input("\nè¯·è¾“å…¥é€‰æ‹© (1/2/3): ").strip()
    
    if choice == "1":
        demo_agent_creation()
    elif choice == "2":
        demo_tool_and_agent_collaboration()
    else:
        demo_agent_creation()
        demo_tool_and_agent_collaboration()
