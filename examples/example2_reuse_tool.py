"""
ç¤ºä¾‹2ï¼šè·¨ä¼šè¯å¤ç”¨å·¥å…·

å±•ç¤ºå·¥å…·çš„æŒä¹…åŒ–å’Œè·¨ä¼šè¯å¤ç”¨èƒ½åŠ›
"""
import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from agent import create_tool_creator_agent


def session_1():
    """ç¬¬ä¸€ä¸ªä¼šè¯ï¼šåˆ›å»ºå·¥å…·"""
    print("=" * 60)
    print("  ç¬¬ä¸€ä¸ªä¼šè¯ï¼šåˆ›å»ºå·¥å…·")
    print("=" * 60 + "\n")
    
    agent = create_tool_creator_agent(
        model="gpt-4",
        thread_id="reuse-demo"  # æ³¨æ„è¿™ä¸ª thread_id
    )
    
    print("ğŸ‘¤ ç”¨æˆ·: åˆ›å»ºä¸€ä¸ªè®¡ç®—å‘˜å·¥å·¥èµ„çš„å·¥å…·")
    print("       è¾“å…¥åŸºæœ¬å·¥èµ„ã€ç»©æ•ˆç³»æ•°(0-2)ã€åŠ ç­å°æ—¶æ•°")
    print("       å…¬å¼ï¼šåŸºæœ¬å·¥èµ„ * ç»©æ•ˆç³»æ•° + åŠ ç­å°æ—¶æ•° * 50")
    print()
    
    response = agent.chat(
        "åˆ›å»ºä¸€ä¸ªè®¡ç®—å‘˜å·¥å·¥èµ„çš„å·¥å…·ï¼Œ"
        "è¾“å…¥base_salary(åŸºæœ¬å·¥èµ„)ã€performance(ç»©æ•ˆç³»æ•°0-2)ã€overtime_hours(åŠ ç­å°æ—¶)ï¼Œ"
        "è¿”å›æ€»å·¥èµ„ï¼Œå…¬å¼æ˜¯ base_salary * performance + overtime_hours * 50"
    )
    
    print(f"ğŸ¤– åŠ©æ‰‹:\n{response}\n")
    
    print("âœ… å·¥å…·å·²åˆ›å»ºå¹¶æŒä¹…åŒ–åˆ° checkpoint")
    print("ğŸ’¾ ä¼šè¯ç»“æŸ...\n")


def session_2():
    """ç¬¬äºŒä¸ªä¼šè¯ï¼šä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„å·¥å…·"""
    print("=" * 60)
    print("  ç¬¬äºŒä¸ªä¼šè¯ï¼šä½¿ç”¨ä¹‹å‰çš„å·¥å…·ï¼ˆæ–°å®ä¾‹ï¼‰")
    print("=" * 60 + "\n")
    
    # åˆ›å»ºæ–°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œä½†ä½¿ç”¨ç›¸åŒçš„ thread_id
    agent = create_tool_creator_agent(
        model="gpt-4",
        thread_id="reuse-demo"  # ç›¸åŒçš„ thread_id
    )
    
    print("ğŸ“¥ å·¥å…·ä» checkpoint è‡ªåŠ¨æ¢å¤...\n")
    
    print("ğŸ‘¤ ç”¨æˆ·: è®¡ç®—å‘˜å·¥å·¥èµ„")
    print("       åŸºæœ¬å·¥èµ„5000ï¼Œç»©æ•ˆç³»æ•°1.5ï¼ŒåŠ ç­10å°æ—¶")
    print()
    
    response = agent.chat(
        "è®¡ç®—ä¸€ä¸ªå‘˜å·¥çš„å·¥èµ„ï¼šåŸºæœ¬å·¥èµ„5000ï¼Œç»©æ•ˆç³»æ•°1.5ï¼ŒåŠ ç­10å°æ—¶"
    )
    
    print(f"ğŸ¤– åŠ©æ‰‹: {response}\n")
    
    print("âœ… å·¥å…·åœ¨æ–°ä¼šè¯ä¸­è‡ªåŠ¨æ¢å¤å¹¶ä½¿ç”¨ï¼")
    print("ğŸ¯ æ ¸å¿ƒä»·å€¼ï¼šæ— éœ€é‡æ–°åˆ›å»ºï¼Œç›´æ¥å¤ç”¨ï¼")


def main():
    print("\n" + "ğŸš€" * 30)
    print("    ç¤ºä¾‹2ï¼šè·¨ä¼šè¯å¤ç”¨å·¥å…·")
    print("ğŸš€" * 30 + "\n")
    
    # ç¬¬ä¸€ä¸ªä¼šè¯
    session_1()
    
    # æ¨¡æ‹Ÿä¼šè¯ç»“æŸï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤
    input("æŒ‰å›è½¦é”®ç»§ç»­åˆ°ç¬¬äºŒä¸ªä¼šè¯...")
    print()
    
    # ç¬¬äºŒä¸ªä¼šè¯
    session_2()
    
    print("\n" + "ğŸ‰" * 30)
    print("    ç¤ºä¾‹å®Œæˆï¼")
    print("ğŸ‰" * 30 + "\n")


if __name__ == "__main__":
    main()

